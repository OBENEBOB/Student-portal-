<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Dashboard</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body {
            margin: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f3f6fb;
        }

        html {
            scroll-behavior: smooth;
        }

        /* ====================== LEFT SIDEBAR ====================== */
        .sidebar {
            width: 260px;
            background: linear-gradient(180deg, #4c5bd4 0%, #3a47b3 100%);
            height: 100vh;
            color: white;
            position: fixed;
            left: 0;
            top: 0;
            padding: 25px 20px;
            box-shadow: 4px 0 15px rgba(0, 0, 0, 0.15);
            z-index: 1000;
        }

        .sidebar-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .sidebar-header h2 {
            margin: 0;
            font-size: 24px;
            font-weight: 600;
        }

        .sidebar-header p {
            margin: 5px 0 0;
            opacity: 0.9;
            font-size: 14px;
        }

        .menu {
            margin-top: 20px;
        }

        .menu-item {
            display: flex;
            align-items: center;
            color: white;
            text-decoration: none;
            padding: 12px 15px;
            margin: 8px 0;
            background: rgba(255, 255, 255, 0.08);
            border-radius: 10px;
            transition: all 0.3s ease;
            font-size: 15px;
            font-weight: 500;
        }

        .menu-item:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateX(5px);
            text-decoration: none;
            color: white;
        }

        .menu-item.active {
            background: rgba(255, 255, 255, 0.2);
            border-left: 4px solid white;
        }

        .menu-item i {
            margin-right: 12px;
            font-size: 18px;
            width: 24px;
            text-align: center;
        }

        .logout-item {
            margin-top: 30px;
            background: rgba(220, 53, 69, 0.2);
            border: 1px solid rgba(220, 53, 69, 0.3);
        }

        .logout-item:hover {
            background: rgba(220, 53, 69, 0.3);
        }

        /* ====================== MAIN CONTENT ====================== */
        .main-content {
            margin-left: 260px;
            padding: 30px;
            min-height: 100vh;
        }

        .container-fluid {
            max-width: 1400px;
            margin: 0 auto;
        }

        /* ====================== WELCOME BANNER ====================== */
        .welcome-banner {
            background: linear-gradient(135deg, #4c5bd4 0%, #6a11cb 100%);
            color: white;
            padding: 25px 30px;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 5px 20px rgba(76, 91, 212, 0.2);
        }

        .welcome-banner h1 {
            font-size: 28px;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .welcome-banner p {
            font-size: 16px;
            opacity: 0.9;
            margin-bottom: 0;
        }

        /* ====================== PROFILE CARD ====================== */
        .profile-section {
            margin-bottom: 30px;
        }

        .profile-card {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
            border: none;
        }

        .profile-header {
            display: flex;
            align-items: center;
            margin-bottom: 25px;
        }

        .profile-avatar {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            object-fit: cover;
            border: 5px solid #f0f2f5;
            margin-right: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .profile-info h2 {
            margin: 0 0 8px 0;
            font-size: 28px;
            color: #333;
            font-weight: 600;
        }

        .profile-info p {
            margin: 5px 0;
            color: #666;
            font-size: 16px;
        }

        .profile-badges {
            margin-top: 15px;
        }

        .badge {
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 500;
            margin-right: 8px;
        }

        .badge-primary {
            background: rgba(76, 91, 212, 0.1);
            color: #4c5bd4;
        }

        .badge-success {
            background: rgba(40, 167, 69, 0.1);
            color: #28a745;
        }

        /* ====================== DASHBOARD CARDS ====================== */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .stat-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            border: none;
            transition: all 0.3s ease;
            height: 100%;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }

        .stat-card-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }

        .stat-icon {
            width: 60px;
            height: 60px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            font-size: 24px;
            color: white;
        }

        .stat-card h3 {
            margin: 0;
            font-size: 18px;
            color: #666;
            font-weight: 500;
        }

        .stat-value {
            font-size: 32px;
            font-weight: 600;
            color: #333;
            margin: 10px 0;
        }

        .stat-change {
            font-size: 14px;
            color: #28a745;
        }

        .stat-change.negative {
            color: #dc3545;
        }

        /* ====================== COURSES SECTION ====================== */
        .section-header {
            margin: 40px 0 25px 0;
            padding-bottom: 15px;
            border-bottom: 2px solid #eaeaea;
        }

        .section-header h2 {
            font-size: 24px;
            font-weight: 600;
            color: #333;
            margin: 0;
        }

        .courses-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .course-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            border: none;
            transition: all 0.3s ease;
        }

        .course-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }

        .course-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 20px;
        }

        .course-header h4 {
            margin: 0;
            font-size: 20px;
            font-weight: 600;
            color: #333;
        }

        .course-badge {
            background: #4c5bd4;
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
        }

        .course-info p {
            margin: 8px 0;
            color: #666;
            font-size: 15px;
        }

        .course-progress {
            margin-top: 20px;
        }

        .progress {
            height: 10px;
            border-radius: 5px;
            background: #f0f2f5;
            margin-bottom: 10px;
        }

        .progress-bar {
            background: linear-gradient(90deg, #4c5bd4 0%, #6a11cb 100%);
            border-radius: 5px;
        }

        .progress-text {
            display: flex;
            justify-content: space-between;
            font-size: 14px;
            color: #666;
        }

        /* ====================== SCHEDULE SECTION ====================== */
        .schedule-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .schedule-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            border: none;
            transition: all 0.3s ease;
        }

        .schedule-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }

        .schedule-time {
            background: rgba(76, 91, 212, 0.1);
            color: #4c5bd4;
            padding: 8px 15px;
            border-radius: 20px;
            display: inline-block;
            font-size: 14px;
            font-weight: 500;
            margin-bottom: 15px;
        }

        .schedule-card h4 {
            margin: 0 0 10px 0;
            font-size: 20px;
            font-weight: 600;
            color: #333;
        }

        .schedule-info p {
            margin: 8px 0;
            color: #666;
            font-size: 15px;
        }

        .schedule-location {
            display: flex;
            align-items: center;
            color: #666;
            font-size: 14px;
            margin-top: 15px;
        }

        .schedule-location i {
            margin-right: 8px;
            color: #4c5bd4;
        }

        /* ====================== ANIMATIONS ====================== */
        .fade-in {
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.6s ease-out;
        }

        .fade-in.visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* ====================== RESPONSIVE ====================== */
        @media (max-width: 992px) {
            .sidebar {
                width: 70px;
                padding: 20px 10px;
            }
            
            .sidebar-header h2,
            .sidebar-header p,
            .menu-item span {
                display: none;
            }
            
            .menu-item {
                justify-content: center;
                padding: 12px;
            }
            
            .menu-item i {
                margin-right: 0;
                font-size: 20px;
            }
            
            .main-content {
                margin-left: 70px;
            }
        }

        @media (max-width: 768px) {
            .main-content {
                padding: 20px;
            }
            
            .profile-header {
                flex-direction: column;
                text-align: center;
            }
            
            .profile-avatar {
                margin-right: 0;
                margin-bottom: 20px;
            }
            
            .dashboard-grid,
            .courses-grid,
            .schedule-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- ====================== SIDEBAR ====================== -->
    <div class="sidebar">
        <div class="sidebar-header">
            <h2><i class="fas fa-graduation-cap me-2"></i>Dashboard</h2>
            <p>Student Portal</p>
        </div>
        
        <div class="menu">
            <a href="#" class="menu-item active">
                <i class="fas fa-home"></i>
                <span>Home</span>
            </a>
            <a href="#coursesSection" class="menu-item">
                <i class="fas fa-book"></i>
                <span>Courses</span>
            </a>
            <a href="#scheduleSection" class="menu-item">
                <i class="fas fa-calendar-alt"></i>
                <span>Schedule</span>
            </a>
            <a href="profile.html" class="menu-item">
                <i class="fas fa-user"></i>
                <span>Profile</span>
            </a>
            <a href="#" class="menu-item logout-item" id="logout">
                <i class="fas fa-sign-out-alt"></i>
                <span>Logout</span>
            </a>
        </div>
    </div>

    <!-- ====================== MAIN CONTENT ====================== -->
    <div class="main-content">
        <div class="container-fluid">
            <!-- Welcome Banner -->
            <div class="welcome-banner fade-in">
                <h1>Welcome back, <span id="loggedUserFullName">Student</span>!</h1>
                <p>Here's your academic dashboard with everything you need to stay on track.</p>
            </div>

            <!-- Profile Section -->
            <div class="profile-section">
                <div class="profile-card fade-in">
                    <div class="profile-header">
                        <img id="avatarPreviewHomepage" src="https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_1280.png" 
                             class="profile-avatar" alt="Profile Avatar">
                        <div class="profile-info">
                            <h2 id="loggedUserFullName2">Loading...</h2>
                            <p><strong>School ID:</strong> <span id="loggedUserSchoolId">Loading...</span></p>
                            <p><strong>Program:</strong> <span id="loggedUserProgram">Loading...</span></p>
                            <p><strong>Email:</strong> <span id="loggedUserEmail">Loading...</span></p>
                            <div class="profile-badges">
                                <span class="badge badge-primary"><i class="fas fa-user-graduate me-1"></i>Student</span>
                                <span class="badge badge-success"><i class="fas fa-check-circle me-1"></i>Active</span>
                            </div>
                        </div>
                    </div>
                    <div class="text-center">
                        <button class="btn btn-primary btn-lg" onclick="window.location.href='profile.html'">
                            <i class="fas fa-edit me-2"></i>Edit Profile
                        </button>
                    </div>
                </div>
            </div>

            <!-- Dashboard Stats -->
            <div class="dashboard-grid">
                <div class="stat-card fade-in">
                    <div class="stat-card-header">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #4c5bd4 0%, #6a11cb 100%);">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <div>
                            <h3>Current GPA</h3>
                            <div class="stat-value" id="gpaValue">3.8</div>
                            <div class="stat-change"><i class="fas fa-arrow-up me-1"></i>+0.2 from last term</div>
                        </div>
                    </div>
                </div>

                <div class="stat-card fade-in">
                    <div class="stat-card-header">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #28a745 0%, #20c997 100%);">
                            <i class="fas fa-calendar-check"></i>
                        </div>
                        <div>
                            <h3>Attendance</h3>
                            <div class="stat-value" id="attendanceValue">92%</div>
                            <div class="stat-change"><i class="fas fa-check-circle me-1"></i>Excellent</div>
                        </div>
                    </div>
                </div>

                <div class="stat-card fade-in">
                    <div class="stat-card-header">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #ffc107 0%, #fd7e14 100%);">
                            <i class="fas fa-tasks"></i>
                        </div>
                        <div>
                            <h3>Upcoming Tasks</h3>
                            <div class="stat-value" id="taskCount">5</div>
                            <div class="stat-change"><i class="fas fa-exclamation-circle me-1"></i>2 due this week</div>
                        </div>
                    </div>
                </div>

                <div class="stat-card fade-in">
                    <div class="stat-card-header">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #dc3545 0%, #e83e8c 100%);">
                            <i class="fas fa-bell"></i>
                        </div>
                        <div>
                            <h3>Notifications</h3>
                            <div class="stat-value" id="notificationCount">3</div>
                            <div class="stat-change"><i class="fas fa-envelope me-1"></i>New announcements</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Courses Section -->
            <div class="section-header" id="coursesSection">
                <h2><i class="fas fa-book me-2"></i>My Courses</h2>
            </div>

            <div class="courses-grid" id="coursesContainer">
                <!-- Courses will be dynamically loaded here based on program -->
                <div class="text-center py-5">
                    <div class="spinner-border text-primary" role="status">
                        <span class="visually-hidden">Loading courses...</span>
                    </div>
                    <p class="mt-3">Loading courses for your program...</p>
                </div>
            </div>

            <!-- Schedule Section -->
            <div class="section-header" id="scheduleSection">
                <h2><i class="fas fa-calendar-alt me-2"></i>Today's Schedule</h2>
            </div>

            <div class="schedule-grid" id="scheduleContainer">
                <!-- Schedule will be dynamically loaded here based on program -->
                <div class="text-center py-5">
                    <div class="spinner-border text-primary" role="status">
                        <span class="visually-hidden">Loading schedule...</span>
                    </div>
                    <p class="mt-3">Loading schedule for your program...</p>
                </div>
            </div>
        </div>
    </div>

    <!-- FIREBASE SCRIPT â€” DO NOT TOUCH -->
    <script type="module" src="homepage.js"></script>

    <script>
           function isInViewport(el) {
            const rect = el.getBoundingClientRect();
            return (
                rect.top < (window.innerHeight || document.documentElement.clientHeight) * 0.9
            );
        }

        function animateElements() {
            const elements = document.querySelectorAll('.fade-in');
            elements.forEach(el => {
                if (isInViewport(el)) {
                    el.classList.add('visible');
                }
            });
        }

        // Program-specific data for courses and schedules
        const programData = {
            "Computer Science": {
                courses: [
                    {
                        name: "Data Structures & Algorithms",
                        code: "CS 301",
                        lecturer: "Dr. Johnson",
                        time: "Mon & Wed, 9:00 AM - 10:30 AM",
                        progress: 85,
                        room: "CS Building - Room 101"
                    },
                    {
                        name: "Database Systems",
                        code: "CS 302",
                        lecturer: "Prof. Chen",
                        time: "Tue & Thu, 11:00 AM - 12:30 PM",
                        progress: 70,
                        room: "CS Building - Room 205"
                    },
                    {
                        name: "Software Engineering",
                        code: "CS 303",
                        lecturer: "Dr. Rodriguez",
                        time: "Fri, 2:00 PM - 4:00 PM",
                        progress: 60,
                        room: "CS Building - Room 310"
                    },
                    {
                        name: "Artificial Intelligence",
                        code: "CS 304",
                        lecturer: "Prof. Kumar",
                        time: "Mon & Wed, 2:00 PM - 3:30 PM",
                        progress: 75,
                        room: "AI Lab - Room 401"
                    },
                    {
                        name: "Web Development",
                        code: "CS 305",
                        lecturer: "Mrs. Franklin",
                        time: "Tue & Thu, 9:00 AM - 10:30 AM",
                        progress: 90,
                        room: "Computer Lab - Room 304"
                    }
                ],
                schedule: [
                    {
                        time: "9:00 AM - 10:30 AM",
                        course: "Web Development",
                        lecturer: "Mrs. Franklin",
                        topic: "React.js Advanced",
                        location: "Computer Lab - Room 304"
                    },
                    {
                        time: "11:00 AM - 12:30 PM",
                        course: "Database Systems",
                        lecturer: "Prof. Chen",
                        topic: "SQL Optimization",
                        location: "CS Building - Room 205"
                    },
                    {
                        time: "2:00 PM - 3:30 PM",
                        course: "Artificial Intelligence",
                        lecturer: "Prof. Kumar",
                        topic: "Machine Learning Basics",
                        location: "AI Lab - Room 401"
                    },
                    {
                        time: "4:00 PM - 5:30 PM",
                        course: "Data Structures",
                        lecturer: "Dr. Johnson",
                        topic: "Graph Algorithms",
                        location: "CS Building - Room 101"
                    }
                ]
            },
            "Business Administration": {
                courses: [
                    {
                        name: "Marketing Management",
                        code: "BUS 301",
                        lecturer: "Mr. Thompson",
                        time: "Mon & Wed, 9:00 AM - 10:30 AM",
                        progress: 80,
                        room: "Business Building - Room 101"
                    },
                    {
                        name: "Financial Accounting",
                        code: "BUS 302",
                        lecturer: "Prof. Williams",
                        time: "Tue & Thu, 11:00 AM - 12:30 PM",
                        progress: 75,
                        room: "Business Building - Room 205"
                    },
                    {
                        name: "Business Ethics",
                        code: "BUS 303",
                        lecturer: "Dr. Martinez",
                        time: "Fri, 2:00 PM - 4:00 PM",
                        progress: 85,
                        room: "Business Building - Room 310"
                    },
                    {
                        name: "Entrepreneurship",
                        code: "BUS 304",
                        lecturer: "Dr. Johnson",
                        time: "Mon & Wed, 2:00 PM - 3:30 PM",
                        progress: 70,
                        room: "Innovation Center - Room 101"
                    },
                    {
                        name: "Strategic Management",
                        code: "BUS 305",
                        lecturer: "Prof. Davis",
                        time: "Tue & Thu, 2:00 PM - 3:30 PM",
                        progress: 65,
                        room: "Business Building - Room 401"
                    }
                ],
                schedule: [
                    {
                        time: "9:00 AM - 10:30 AM",
                        course: "Marketing Management",
                        lecturer: "Mr. Thompson",
                        topic: "Digital Marketing Strategies",
                        location: "Business Building - Room 101"
                    },
                    {
                        time: "11:00 AM - 12:30 PM",
                        course: "Financial Accounting",
                        lecturer: "Prof. Williams",
                        topic: "Balance Sheet Analysis",
                        location: "Business Building - Room 205"
                    },
                    {
                        time: "2:00 PM - 3:30 PM",
                        course: "Entrepreneurship",
                        lecturer: "Dr. Johnson",
                        topic: "Business Plan Development",
                        location: "Innovation Center - Room 101"
                    },
                    {
                        time: "4:00 PM - 5:30 PM",
                        course: "Strategic Management",
                        lecturer: "Prof. Davis",
                        topic: "SWOT Analysis Workshop",
                        location: "Business Building - Room 401"
                    }
                ]
            },
            "Engineering": {
                courses: [
                    {
                        name: "Thermodynamics",
                        code: "ENG 301",
                        lecturer: "Dr. Smith",
                        time: "Mon & Wed, 8:00 AM - 9:30 AM",
                        progress: 75,
                        room: "Engineering Building - Room 101"
                    },
                    {
                        name: "Circuit Analysis",
                        code: "ENG 302",
                        lecturer: "Prof. Lee",
                        time: "Tue & Thu, 10:00 AM - 11:30 AM",
                        progress: 80,
                        room: "Engineering Building - Room 205"
                    },
                    {
                        name: "Mechanics of Materials",
                        code: "ENG 303",
                        lecturer: "Dr. Brown",
                        time: "Fri, 1:00 PM - 3:00 PM",
                        progress: 70,
                        room: "Engineering Building - Room 310"
                    },
                    {
                        name: "Digital Systems",
                        code: "ENG 304",
                        lecturer: "Prof. Wilson",
                        time: "Mon & Wed, 2:00 PM - 3:30 PM",
                        progress: 85,
                        room: "Engineering Lab - Room 401"
                    },
                    {
                        name: "Fluid Mechanics",
                        code: "ENG 305",
                        lecturer: "Dr. Taylor",
                        time: "Tue & Thu, 2:00 PM - 3:30 PM",
                        progress: 65,
                        room: "Fluid Mechanics Lab - Room 105"
                    }
                ],
                schedule: [
                    {
                        time: "8:00 AM - 9:30 AM",
                        course: "Thermodynamics",
                        lecturer: "Dr. Smith",
                        topic: "Heat Transfer Principles",
                        location: "Engineering Building - Room 101"
                    },
                    {
                        time: "10:00 AM - 11:30 AM",
                        course: "Circuit Analysis",
                        lecturer: "Prof. Lee",
                        topic: "AC Circuit Theory",
                        location: "Engineering Building - Room 205"
                    },
                    {
                        time: "1:00 PM - 3:00 PM",
                        course: "Mechanics of Materials",
                        lecturer: "Dr. Brown",
                        topic: "Stress-Strain Analysis",
                        location: "Engineering Building - Room 310"
                    },
                    {
                        time: "3:30 PM - 5:00 PM",
                        course: "Digital Systems Lab",
                        lecturer: "Prof. Wilson",
                        topic: "FPGA Programming",
                        location: "Engineering Lab - Room 401"
                    }
                ]
            },
            "Medicine": {
                courses: [
                    {
                        name: "Anatomy & Physiology",
                        code: "MED 301",
                        lecturer: "Dr. Anderson",
                        time: "Mon & Wed, 8:00 AM - 10:00 AM",
                        progress: 90,
                        room: "Medical Building - Anatomy Lab"
                    },
                    {
                        name: "Biochemistry",
                        code: "MED 302",
                        lecturer: "Prof. Clark",
                        time: "Tue & Thu, 10:00 AM - 12:00 PM",
                        progress: 75,
                        room: "Science Building - Room 305"
                    },
                    {
                        name: "Pharmacology",
                        code: "MED 303",
                        lecturer: "Dr. White",
                        time: "Fri, 9:00 AM - 11:00 AM",
                        progress: 80,
                        room: "Medical Building - Room 210"
                    },
                    {
                        name: "Pathology",
                        code: "MED 304",
                        lecturer: "Prof. Harris",
                        time: "Mon & Wed, 1:00 PM - 3:00 PM",
                        progress: 70,
                        room: "Medical Building - Lab 3"
                    },
                    {
                        name: "Clinical Skills",
                        code: "MED 305",
                        lecturer: "Dr. Martin",
                        time: "Tue & Thu, 2:00 PM - 4:00 PM",
                        progress: 85,
                        room: "Clinical Skills Center"
                    }
                ],
                schedule: [
                    {
                        time: "8:00 AM - 10:00 AM",
                        course: "Anatomy & Physiology",
                        lecturer: "Dr. Anderson",
                        topic: "Cardiovascular System",
                        location: "Medical Building - Anatomy Lab"
                    },
                    {
                        time: "10:00 AM - 12:00 PM",
                        course: "Biochemistry",
                        lecturer: "Prof. Clark",
                        topic: "Enzyme Kinetics",
                        location: "Science Building - Room 305"
                    },
                    {
                        time: "1:00 PM - 3:00 PM",
                        course: "Pathology",
                        lecturer: "Prof. Harris",
                        topic: "Inflammatory Responses",
                        location: "Medical Building - Lab 3"
                    },
                    {
                        time: "3:30 PM - 5:30 PM",
                        course: "Clinical Skills",
                        lecturer: "Dr. Martin",
                        topic: "Patient Examination",
                        location: "Clinical Skills Center"
                    }
                ]
            },
            "Arts": {
                courses: [
                    {
                        name: "Art History",
                        code: "ART 301",
                        lecturer: "Prof. Garcia",
                        time: "Mon & Wed, 10:00 AM - 11:30 AM",
                        progress: 85,
                        room: "Arts Building - Room 101"
                    },
                    {
                        name: "Drawing Fundamentals",
                        code: "ART 302",
                        lecturer: "Ms. Rodriguez",
                        time: "Tue & Thu, 9:00 AM - 11:00 AM",
                        progress: 90,
                        room: "Arts Building - Studio A"
                    },
                    {
                        name: "Digital Media",
                        code: "ART 303",
                        lecturer: "Mr. Chen",
                        time: "Fri, 1:00 PM - 4:00 PM",
                        progress: 75,
                        room: "Arts Building - Computer Lab"
                    },
                    {
                        name: "Photography",
                        code: "ART 304",
                        lecturer: "Prof. Wilson",
                        time: "Mon & Wed, 2:00 PM - 4:00 PM",
                        progress: 80,
                        room: "Arts Building - Studio B"
                    },
                    {
                        name: "Art Theory",
                        code: "ART 305",
                        lecturer: "Dr. Thompson",
                        time: "Tue & Thu, 2:00 PM - 3:30 PM",
                        progress: 70,
                        room: "Arts Building - Room 205"
                    }
                ],
                schedule: [
                    {
                        time: "9:00 AM - 11:00 AM",
                        course: "Drawing Fundamentals",
                        lecturer: "Ms. Rodriguez",
                        topic: "Figure Drawing",
                        location: "Arts Building - Studio A"
                    },
                    {
                        time: "11:00 AM - 12:30 PM",
                        course: "Art History",
                        lecturer: "Prof. Garcia",
                        topic: "Renaissance Art",
                        location: "Arts Building - Room 101"
                    },
                    {
                        time: "2:00 PM - 4:00 PM",
                        course: "Photography",
                        lecturer: "Prof. Wilson",
                        topic: "Portrait Photography",
                        location: "Arts Building - Studio B"
                    },
                    {
                        time: "4:30 PM - 6:30 PM",
                        course: "Digital Media Lab",
                        lecturer: "Mr. Chen",
                        topic: "Adobe Photoshop",
                        location: "Arts Building - Computer Lab"
                    }
                ]
            },
            "Other": {
                courses: [
                    {
                        name: "General Education",
                        code: "GEN 301",
                        lecturer: "Dr. Miller",
                        time: "Mon & Wed, 9:00 AM - 10:30 AM",
                        progress: 75,
                        room: "Main Building - Room 101"
                    },
                    {
                        name: "Research Methods",
                        code: "GEN 302",
                        lecturer: "Prof. Davis",
                        time: "Tue & Thu, 11:00 AM - 12:30 PM",
                        progress: 80,
                        room: "Library - Study Room 3"
                    },
                    {
                        name: "Academic Writing",
                        code: "GEN 303",
                        lecturer: "Dr. Wilson",
                        time: "Fri, 2:00 PM - 4:00 PM",
                        progress: 85,
                        room: "Main Building - Room 205"
                    }
                ],
                schedule: [
                    {
                        time: "9:00 AM - 10:30 AM",
                        course: "General Education",
                        lecturer: "Dr. Miller",
                        topic: "Critical Thinking",
                        location: "Main Building - Room 101"
                    },
                    {
                        time: "11:00 AM - 12:30 PM",
                        course: "Research Methods",
                        lecturer: "Prof. Davis",
                        topic: "Data Collection",
                        location: "Library - Study Room 3"
                    },
                    {
                        time: "2:00 PM - 4:00 PM",
                        course: "Academic Writing",
                        lecturer: "Dr. Wilson",
                        topic: "Thesis Writing",
                        location: "Main Building - Room 205"
                    }
                ]
            }
        };

        // Function to load program-specific content
         function waitForUserData() {
            // Check if homepage.js has loaded the user data
            const nameElement = document.getElementById('loggedUserFullName');
            const programElement = document.getElementById('loggedUserProgram');
            
            // If data is loaded (not "Loading..." or empty)
            if (nameElement && nameElement.textContent !== 'Loading...' && 
                nameElement.textContent !== 'Student' && nameElement.textContent.trim() !== '') {
                
                console.log('User data loaded:', nameElement.textContent);
                
                // Copy name to second location
                const name2 = document.getElementById('loggedUserFullName2');
                if (name2) {
                    name2.textContent = nameElement.textContent;
                }
                
                // Load program-specific content if program is loaded
                if (programElement && programElement.textContent !== 'Loading...') {
                    loadProgramContent(programElement.textContent);
                }
                
                return true;
            }
            return false;
        }

        // Modified function to accept program parameter
        function loadProgramContent(program) {
            console.log('Loading content for program:', program);
            
            // Get program data (default to Computer Science if program not found)
            const data = programData[program] || programData["Computer Science"];
            
            // Load courses
            const coursesContainer = document.getElementById('coursesContainer');
            if (coursesContainer && data.courses) {
                coursesContainer.innerHTML = '';
                data.courses.forEach(course => {
                    const courseCard = `
                        <div class="course-card fade-in">
                            <div class="course-header">
                                <h4>${course.name}</h4>
                                <span class="course-badge">${course.code}</span>
                            </div>
                            <div class="course-info">
                                <p><i class="fas fa-user-tie me-2"></i>Lecturer: ${course.lecturer}</p>
                                <p><i class="fas fa-clock me-2"></i>${course.time}</p>
                                <p><i class="fas fa-map-marker-alt me-2"></i>${course.room}</p>
                            </div>
                            <div class="course-progress">
                                <div class="progress-text">
                                    <span>Progress</span>
                                    <span>${course.progress}%</span>
                                </div>
                                <div class="progress">
                                    <div class="progress-bar" style="width: ${course.progress}%"></div>
                                </div>
                            </div>
                        </div>
                    `;
                    coursesContainer.innerHTML += courseCard;
                });
            }
            
            // Load schedule
            const scheduleContainer = document.getElementById('scheduleContainer');
            if (scheduleContainer && data.schedule) {
                scheduleContainer.innerHTML = '';
                data.schedule.forEach(item => {
                    const scheduleCard = `
                        <div class="schedule-card fade-in">
                            <span class="schedule-time">${item.time}</span>
                            <h4>${item.course}</h4>
                            <div class="schedule-info">
                                <p><i class="fas fa-user-tie me-2"></i>${item.lecturer}</p>
                                <p><i class="fas fa-book me-2"></i>Topic: ${item.topic}</p>
                            </div>
                            <div class="schedule-location">
                                <i class="fas fa-map-marker-alt"></i>
                                <span>${item.location}</span>
                            </div>
                        </div>
                    `;
                    scheduleContainer.innerHTML += scheduleCard;
                });
            }
            
            // Trigger animations for newly added elements
            setTimeout(animateElements, 100);
        }

        // Initialize everything
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Dashboard page loaded');
            
            // Start polling for user data (every 100ms)
            const checkInterval = setInterval(() => {
                if (waitForUserData()) {
                    clearInterval(checkInterval);
                    console.log('User data loaded successfully');
                }
            }, 100);
            
            // Safety timeout - stop checking after 10 seconds
            setTimeout(() => {
                clearInterval(checkInterval);
                console.log('Stopped checking for user data');
            }, 10000);
            
            // Initialize animations
            animateElements();
            
            // Smooth scrolling for sidebar links
            document.querySelectorAll('.menu-item').forEach(link => {
                link.addEventListener('click', function(e) {
                    if (this.getAttribute('href').startsWith('#')) {
                        e.preventDefault();
                        const targetId = this.getAttribute('href');
                        const targetElement = document.querySelector(targetId);
                        if (targetElement) {
                            window.scrollTo({
                                top: targetElement.offsetTop - 80,
                                behavior: 'smooth'
                            });
                        }
                    }
                });
            });
            
            // Set active menu item on scroll
            window.addEventListener('scroll', function() {
                const sections = ['coursesSection', 'scheduleSection'];
                const menuItems = document.querySelectorAll('.menu-item');
                
                let currentSection = '';
                sections.forEach(section => {
                    const element = document.getElementById(section);
                    if (element) {
                        const rect = element.getBoundingClientRect();
                        if (rect.top <= 150 && rect.bottom >= 150) {
                            currentSection = section;
                        }
                    }
                });
                
                menuItems.forEach(item => {
                    item.classList.remove('active');
                    if (currentSection && item.getAttribute('href') === `#${currentSection}`) {
                        item.classList.add('active');
                    } else if (!currentSection && item.getAttribute('href') === '#') {
                        item.classList.add('active');
                    }
                });
            });
        });

        // Scroll animation listener
        window.addEventListener('scroll', animateElements);
    </script>
</body>
</html>