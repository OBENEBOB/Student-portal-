 <!DOCTYPE html>

<html lang="en"><head>  <meta charset="utf-8" />  <meta name="viewport" content="width=device-width,initial-scale=1" />  <title>Admin Dashboard</title>  <style>
  
    /* MINIMAL CSS - FAST LOADING */
  
    :root {
  
      --primary: #4f46e5;
  
      --primary-dark: #4338ca;
  
      --secondary: #10b981;
  
      --danger: #ef4444;
  
      --dark: #1f2937;
  
      --light: #f9fafb;
  
      --gray: #6b7280;
  
    }
  
    
  
    * {
  
      margin: 0;
  
      padding: 0;
  
      box-sizing: border-box;
  
    }
  
    
  
    body {
  
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  
      background: #f5f7fb;
  
      color: #333;
  
      display: flex;
  
      min-height: 100vh;
  
    }
  
    
  
    /* SIDEBAR */
  
    .sidebar {
  
      width: 220px;
  
      background: linear-gradient(180deg, var(--primary) 0%, var(--primary-dark) 100%);
  
      color: white;
  
      height: 100vh;
  
      position: fixed;
  
      top: 0;
  
      left: 0;
  
      display: flex;
  
      flex-direction: column;
  
      padding: 20px 0;
  
      box-shadow: 4px 0 15px rgba(0,0,0,0.1);
  
    }
  
    
  
    .sidebar-header {
  
      padding: 0 20px 25px;
  
      border-bottom: 1px solid rgba(255,255,255,0.1);
  
      margin-bottom: 20px;
  
    }
  
    
  
    .sidebar-header h2 {
  
      font-size: 1.4rem;
  
      font-weight: 600;
  
      text-align: center;
  
    }
  
    
  
    .sidebar-nav {
  
      flex: 1;
  
      padding: 0 15px;
  
    }
  
    
  
    .nav-item {
  
      display: block;
  
      color: white;
  
      text-decoration: none;
  
      padding: 12px 15px;
  
      margin: 6px 0;
  
      border-radius: 8px;
  
      transition: all 0.2s;
  
    }
  
    
  
    .nav-item:hover {
  
      background: rgba(255,255,255,0.15);
  
    }
  
    
  
    .nav-item.active {
  
      background: rgba(255,255,255,0.2);
  
      border-left: 4px solid white;
  
    }
  
    
  
    #logoutBtn {
  
      background: rgba(239, 68, 68, 0.2);
  
      border: 1px solid rgba(239, 68, 68, 0.3);
  
    }
  
    
  
    /* MAIN CONTENT */
  
    .main-content {
  
      margin-left: 220px;
  
      padding: 25px;
  
      width: calc(100% - 220px);
  
      min-height: 100vh;
  
    }
  
    
  
    /* HEADER */
  
    .admin-header {
  
      display: flex;
  
      justify-content: space-between;
  
      align-items: center;
  
      margin-bottom: 30px;
  
      padding-bottom: 20px;
  
      border-bottom: 1px solid #e5e7eb;
  
    }
  
    
  
    .header-left h1 {
  
      font-size: 1.8rem;
  
      font-weight: 700;
  
      color: var(--dark);
  
      margin-bottom: 5px;
  
    }
  
    
  
    .header-left p {
  
      color: var(--gray);
  
      font-size: 0.95rem;
  
    }
  
    
  
    .admin-info {
  
      background: white;
  
      padding: 10px 18px;
  
      border-radius: 10px;
  
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
  
      font-size: 0.95rem;
  
    }
  
    
  
    #adminEmail {
  
      font-weight: 500;
  
    }
  
    
  
    /* SEARCH BAR */
  
    .search-container {
  
      margin-bottom: 25px;
  
      background: white;
  
      padding: 20px;
  
      border-radius: 12px;
  
      box-shadow: 0 4px 12px rgba(0,0,0,0.05);
  
    }
  
    
  
    .search-box {
  
      position: relative;
  
    }
  
    
  
    .search-box input {
  
      width: 100%;
  
      padding: 12px 15px 12px 45px;
  
      border-radius: 8px;
  
      border: 1px solid #d1d5db;
  
      font-size: 1rem;
  
      background: white;
  
    }
  
    
  
    .search-box input:focus {
  
      outline: none;
  
      border-color: var(--primary);
  
      box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
  
    }
  
    
  
    .search-box::before {
  
      content: "üîç";
  
      position: absolute;
  
      left: 15px;
  
      top: 50%;
  
      transform: translateY(-50%);
  
      font-size: 1rem;
  
      color: var(--gray);
  
    }
  
    
  
    .search-stats {
  
      margin-top: 10px;
  
      font-size: 0.9rem;
  
      color: var(--gray);
  
    }
  
    
  
    /* CARDS */
  
    .dashboard-cards {
  
      display: grid;
  
      grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
  
      gap: 20px;
  
      margin-bottom: 30px;
  
    }
  
    
  
    .dashboard-card {
  
      background: white;
  
      border-radius: 12px;
  
      padding: 25px;
  
      box-shadow: 0 4px 12px rgba(0,0,0,0.05);
  
      text-align: center;
  
      transition: transform 0.2s;
  
      position: relative;
  
    }
  
    
  
    .dashboard-card:hover {
  
      transform: translateY(-3px);
  
    }
  
    
  
    .dashboard-card::before {
  
      content: '';
  
      position: absolute;
  
      top: 0;
  
      left: 0;
  
      width: 5px;
  
      height: 100%;
  
    }
  
    
  
    .dashboard-card:nth-child(1)::before { background: var(--primary); }
  
    .dashboard-card:nth-child(2)::before { background: var(--secondary); }
  
    .dashboard-card:nth-child(3)::before { background: #f59e0b; }
  
    .dashboard-card:nth-child(4)::before { background: var(--danger); }
  
    
  
    .dashboard-card h3 {
  
      font-size: 0.9rem;
  
      color: var(--gray);
  
      margin-bottom: 10px;
  
      text-transform: uppercase;
  
    }
  
    
  
    #totalStudents, #activeCourses, #pendingTasks, #adminNotifications {
  
      font-size: 2rem;
  
      font-weight: 700;
  
      color: var(--dark);
  
      margin: 10px 0;
  
    }
  
    
  
    /* TABLE - CRITICAL ELEMENTS UNCHANGED */
  
    #studentsTable {
  
      width: 100%;
  
      border-collapse: collapse;
  
      background: white;
  
      border-radius: 12px;
  
      overflow: hidden;
  
      box-shadow: 0 4px 12px rgba(0,0,0,0.05);
  
    }
  
    
  
    #studentsTable th, #studentsTable td {
  
      padding: 12px 15px;
  
      border-bottom: 1px solid #e5e7eb;
  
      text-align: left;
  
      vertical-align: middle;
  
    }
  
    
  
    #studentsTable th {
  
      background: #f9fafb;
  
      color: var(--dark);
  
      font-weight: 600;
  
    }
  
    
  
    #studentsTable tr:hover {
  
      background: #f9fafb;
  
    }
  
    
  
    #studentsTable img {
  
      width: 50px;
  
      height: 50px;
  
      border-radius: 50%;
  
      object-fit: cover;
  
    }
  
    
  
    /* BUTTONS - CRITICAL FOR JS */
  
    .edit-btn, .delete-btn {
  
      padding: 6px 12px;
  
      border-radius: 6px;
  
      border: none;
  
      font-weight: 500;
  
      cursor: pointer;
  
      transition: 0.2s;
  
      margin-right: 5px;
  
    }
  
    
  
    .edit-btn {
  
      background: rgba(79, 70, 229, 0.1);
  
      color: var(--primary);
  
    }
  
    
  
    .edit-btn:hover {
  
      background: rgba(79, 70, 229, 0.2);
  
    }
  
    
  
    .delete-btn {
  
      background: rgba(239, 68, 68, 0.1);
  
      color: var(--danger);
  
    }
  
    
  
    .delete-btn:hover {
  
      background: rgba(239, 68, 68, 0.2);
  
    }
  
    
  
    /* MODAL - CRITICAL STRUCTURE UNCHANGED */
  
    .modal-backdrop {
  
      display: none;
  
      position: fixed;
  
      inset: 0;
  
      background: rgba(0,0,0,0.45);
  
      z-index: 40;
  
      align-items: center;
  
      justify-content: center;
  
    }
  
    
  
    .modal {
  
      background: #fff;
  
      width: 100%;
  
      max-width: 520px;
  
      border-radius: 12px;
  
      padding: 20px;
  
      box-shadow: 0 8px 30px rgba(0,0,0,0.15);
  
      animation: fadeIn 0.3s ease-out;
  
    }
  
    
  
    @keyframes fadeIn {
  
      from { opacity: 0; transform: translateY(-10px); }
  
      to { opacity: 1; transform: translateY(0); }
  
    }
  
    
  
    .modal h2 {
  
      margin: 0 0 20px 0;
  
      color: var(--primary);
  
      font-size: 1.3rem;
  
    }
  
    
  
    .row {
  
      display: flex;
  
      gap: 15px;
  
      margin-bottom: 15px;
  
    }
  
    
  
    .row > div {
  
      flex: 1;
  
    }
  
    
  
    label {
  
      display: block;
  
      font-size: 0.85rem;
  
      margin-bottom: 5px;
  
      color: var(--dark);
  
    }
  
    
  
    input, select {
  
      width: 100%;
  
      padding: 10px;
  
      border: 1px solid #ccc;
  
      border-radius: 6px;
  
    }
  
    
  
    input:read-only {
  
      background: #f9fafb;
  
      color: var(--gray);
  
    }
  
    
  
    .avatar-preview {
  
      width: 80px;
  
      height: 80px;
  
      border-radius: 50%;
  
      object-fit: cover;
  
      border: 1px solid #ddd;
  
    }
  
    
  
    .actions {
  
      display: flex;
  
      gap: 10px;
  
      justify-content: flex-end;
  
      margin-top: 20px;
  
    }
  
    
  
    .btn {
  
      padding: 10px 20px;
  
      border-radius: 6px;
  
      border: none;
  
      cursor: pointer;
  
      font-weight: 500;
  
    }
  
    
  
    .btn.ghost {
  
      background: #e5e7eb;
  
      color: var(--dark);
  
    }
  
    
  
    /* RESPONSIVE */
  
    @media (max-width: 768px) {
  
      .sidebar {
  
        width: 100%;
  
        height: auto;
  
        position: relative;
  
        padding: 15px;
  
        flex-direction: row;
  
        align-items: center;
  
      }
  
      
  
      .sidebar-header {
  
        padding: 0;
  
        border: none;
  
        margin: 0;
  
        width: auto;
  
      }
  
      
  
      .sidebar-nav {
  
        display: flex;
  
        flex-direction: row;
  
        padding: 0;
  
        margin-left: 20px;
  
        overflow-x: auto;
  
      }
  
      
  
      .nav-item {
  
        white-space: nowrap;
  
        margin: 0 5px;
  
      }
  
      
  
      .main-content {
  
        margin-left: 0;
  
        width: 100%;
  
        padding: 20px;
  
      }
  
      
  
      .admin-header {
  
        flex-direction: column;
  
        align-items: flex-start;
  
        gap: 15px;
  
      }
  
      
  
      .dashboard-cards {
  
        grid-template-columns: 1fr;
  
      }
  
      
  
      .row {
  
        flex-direction: column;
  
        gap: 15px;
  
      }
  
    }
  
    
  
    @media (max-width: 480px) {
  
      #studentsTable {
  
        display: block;
  
        overflow-x: auto;
  
      }
  
    }
  
  </style>  <script type="module" src="admin.js"></script></head><body>  <!-- SIDEBAR -->  <div class="sidebar"><div class="sidebar-header">

 <h2><i class="fas fa-users-cog"></i> <span>Admin Panel</span></h2>

</div>



<div class="sidebar-nav">

  <a href="#" class="nav-item active">üè† Dashboard</a>

  <a href="#" class="nav-item">üë®‚Äçüéì Students</a>

  <a href="#" class="nav-item">üìö Courses</a>

  <a href="#" class="nav-item">üóì Schedule</a>

  <a href="#" class="nav-item">‚öô Settings</a>

  <a id="logoutBtn" class="nav-item">üö™ Logout</a>

</div>

  </div>  <!-- MAIN CONTENT -->  <div class="main-content"><div class="admin-wrap">



  <!-- HEADER -->

  <div class="admin-header">

    <div class="header-left">

      <h1>Admin Dashboard</h1>

      <p>Manage students, courses, and system settings</p>

    </div>

    

    <div class="admin-info">

      Admin: <span id="adminEmail">...</span>

    </div>

  </div>



  <!-- CARDS -->

  <div class="dashboard-cards">

    <div class="dashboard-card">

      <h3>Total Students</h3>

      <p id="totalStudents">0</p>

      <small style="color: var(--secondary);">‚Üë Loading...</small>

    </div>

    <div class="dashboard-card">

      <h3>Active Courses</h3>

      <p id="activeCourses">0</p>

      <small style="color: var(--secondary);">All active</small>

    </div>

    <div class="dashboard-card">

      <h3>Pending Tasks</h3>

      <p id="pendingTasks">0</p>

      <small style="color: #f59e0b;">Action required</small>

    </div>

    <div class="dashboard-card">

      <h3>Notifications</h3>

      <p id="adminNotifications">0</p>

      <small style="color: var(--gray);">New updates</small>

    </div>

  </div>



  <!-- SEARCH BAR -->

  <div class="search-container">

    <div class="search-box">

      <input type="text" id="searchInput" placeholder="Search students by name, email, school ID, or program...">

    </div>

    <div class="search-stats">

      <span id="searchResultsCount">0</span> students found

    </div>

  </div>



  <!-- TABLE - IDS MUST MATCH admin.js -->

  <table id="studentsTable" aria-describedby="students-list">

    <thead>

      <tr>

        <th>Avatar</th>

        <th>Full Name</th>

        <th>Email</th>

        <th>School ID</th>

        <th>Program</th>

        <th>Role</th>

        <th style="width:150px">Actions</th>

      </tr>

    </thead>

    <tbody id="studentsTableBody">

      <!-- Firebase loaded rows here -->

      <tr id="loadingRow">

        <td colspan="7" style="text-align: center; padding: 30px;">

          Loading students data...

        </td>

      </tr>

    </tbody>

  </table>



</div>

  </div>  <!-- MODAL - STRUCTURE MUST MATCH admin.js EXPECTATIONS -->  <div id="modalBackdrop" class="modal-backdrop" role="dialog" aria-hidden="true"><div class="modal" role="document" aria-modal="true">

  <button id="closeModal" class="btn ghost small" style="float:right;">Close</button>

  <h2>Edit Student</h2>

  <form id="editStudentForm">

    <div class="row">

      <div>

        <label for="editFirstName">First name</label>

        <input id="editFirstName" type="text" required />

      </div>

      <div>

        <label for="editLastName">Last name</label>

        <input id="editLastName" type="text" required />

      </div>

    </div>

    <div style="margin-bottom:15px;">

      <label for="editEmail">Email (read-only)</label>

      <input id="editEmail" type="text" readonly />

    </div>

    <div class="row">

      <div>

        <label for="editSchoolId">School ID</label>

        <input id="editSchoolId" type="text" />

      </div>

      <div>

        <label for="editProgram">Program</label>

        <select id="editProgram">

          <option value="">Select your program</option>

          <option value="Computer Science">Computer Science</option>

          <option value="Business Administration">Business Administration</option>

          <option value="Engineering">Engineering</option>

          <option value="Medicine">Medicine</option>

          <option value="Arts">Arts</option>

          <option value="Digital Marketing">Digital Marketing</option>

          <option value="Web Development">Web Development</option>

          <option value="Business Law">Business Law</option>

          <option value="Other">Other</option>

        </select>

      </div>

    </div>

    <div style="margin-bottom:15px;">

      <label for="editRole">Role</label>

      <select id="editRole">

        <option value="student">student</option>

        <option value="admin">admin</option>

      </select>

    </div>

    <div style="display:flex; gap:12px; align-items:center; margin-bottom:15px;">

      <div>

        <label for="editAvatar">Change avatar (optional)</label>

        <input id="editAvatar" type="file" accept="image/*" />

      </div>

      <div>

        <img id="editAvatarPreview" class="avatar-preview" src="default-avatar.png" alt="avatar preview" />

      </div>

    </div>

    <div class="actions">

      <button type="button" id="cancelEdit" class="btn ghost">Cancel</button>

      <button type="submit" class="btn">Save changes</button>

    </div>

  </form>

</div>

  </div>  <!-- SEARCH FUNCTIONALITY - WON'T BREAK admin.js -->  <script>
  
    // Search functionality
  
    let allStudents = [];
  
    
  
    // Store reference to original admin.js loadStudents function
  
    const originalLoadStudents = window.loadStudents;
  
    
  
    // Override loadStudents to store student data
  
    if (originalLoadStudents) {
  
      window.loadStudents = async function() {
  
        await originalLoadStudents();
  
        // Store students data for search
  
        storeStudentsData();
  
      };
  
    }
  
    
  
    function storeStudentsData() {
  
      const rows = document.querySelectorAll('#studentsTableBody tr');
  
      allStudents = [];
  
      
  
      rows.forEach(row => {
  
        if (row.cells.length >= 6) {
  
          const student = {
  
            row: row,
  
            name: (row.cells[1]?.textContent || '').toLowerCase(),
  
            email: (row.cells[2]?.textContent || '').toLowerCase(),
  
            schoolId: (row.cells[3]?.textContent || '').toLowerCase(),
  
            program: (row.cells[4]?.textContent || '').toLowerCase(),
  
            role: (row.cells[5]?.textContent || '').toLowerCase()
  
          };
  
          allStudents.push(student);
  
        }
  
      });
  
      
  
      updateSearchResultsCount();
  
    }
  
    
  
    // Search function
  
    function searchStudents(query) {
  
      if (!query.trim()) {
  
        // Show all students
  
        allStudents.forEach(student => {
  
          student.row.style.display = '';
  
        });
  
        updateSearchResultsCount();
  
        return;
  
      }
  
      
  
      const searchTerm = query.toLowerCase();
  
      let visibleCount = 0;
  
      
  
      allStudents.forEach(student => {
  
        const matches = 
  
          student.name.includes(searchTerm) ||
  
          student.email.includes(searchTerm) ||
  
          student.schoolId.includes(searchTerm) ||
  
          student.program.includes(searchTerm) ||
  
          student.role.includes(searchTerm);
  
        
  
        student.row.style.display = matches ? '' : 'none';
  
        if (matches) visibleCount++;
  
      });
  
      
  
      document.getElementById('searchResultsCount').textContent = visibleCount;
  
    }
  
    
  
    function updateSearchResultsCount() {
  
      const visibleRows = document.querySelectorAll('#studentsTableBody tr:not([style*="display: none"])');
  
      document.getElementById('searchResultsCount').textContent = visibleRows.length;
  
    }
  
    
  
    // Add search input listener
  
    document.addEventListener('DOMContentLoaded', function() {
  
      const searchInput = document.getElementById('searchInput');
  
      if (searchInput) {
  
        searchInput.addEventListener('input', function() {
  
          searchStudents(this.value);
  
        });
  
      }
  
      
  
      // Update student count whenever table changes
  
      const observer = new MutationObserver(function() {
  
        storeStudentsData();
  
      });
  
      
  
      const tableBody = document.getElementById('studentsTableBody');
  
      if (tableBody) {
  
        observer.observe(tableBody, { childList: true, subtree: true });
  
      }
  
      
  
      // Initial store after a short delay to allow admin.js to load
  
      setTimeout(storeStudentsData, 1000);
  
    });
  
    
  
    // Simple time display (optional)
  
    function updateTime() {
  
      const timeEl = document.createElement('span');
  
      timeEl.id = 'currentTime';
  
      timeEl.style.marginLeft = '10px';
  
      timeEl.style.color = 'var(--gray)';
  
      document.querySelector('.admin-info').appendChild(timeEl);
  
      
  
      setInterval(() => {
  
        const now = new Date();
  
        timeEl.textContent = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
  
      }, 1000);
  
    }
  
    
  
    // Run after page loads
  
    setTimeout(updateTime, 100);
  
  </script></body></html>